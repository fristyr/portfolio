"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function(){var e,t,n,a,o,r,i,c,s,l,d,u,m,f,h,_,p=["a web developer","a front-end developer","a JavaScript developer"],v=new(function(){function t(e){_classCallCheck(this,t),this.el=e,this.chars="!<>-_\\/[]{}=+*^?#",this.update=this.update.bind(this)}return _createClass(t,[{key:"setText",value:function(e){var t=this,n=this.el.innerText,a=Math.max(n.length,e.length),o=new Promise(function(e){return t.resolve=e});this.queue=[];for(var r=0;r<a;r++){var i=n[r]||"",c=e[r]||"",s=Math.floor(100*Math.random()),l=s+Math.floor(100*Math.random());this.queue.push({from:i,to:c,start:s,end:l})}return cancelAnimationFrame(this.frameRequest),this.frame=0,this.update(),o}},{key:"update",value:function(){for(var e="",t=0,n=0,a=this.queue.length;n<a;n++){var o=this.queue[n],r=o.from,i=o.to,c=o.start,s=o.end,l=o.char;this.frame>=s?(t++,e+=i):this.frame>=c?((!l||Math.random()<.01)&&(l=this.randomChar(),this.queue[n].char=l),e+='<span class="intro__subtitle_char">'.concat(l,"</span>")):e+=r}this.el.innerHTML=e,t===this.queue.length?this.resolve():(this.frameRequest=requestAnimationFrame(this.update),this.frame++)}},{key:"randomChar",value:function(){return this.chars[Math.floor(Math.random()*this.chars.length)]}}]),t}())(document.querySelector(".intro__subtitle")),y=0,L=function e(){v.setText(p[y]).then(function(){setTimeout(e,1800)}),y=(y+1)%p.length};L(),document.body.onload=function(){setTimeout(function(){var e=document.getElementById("page-reloader");e.classList.contains("done")||e.classList.add("done")},1e3)},function(){var e=document.querySelector(".burger-menu"),t=document.querySelector(".main-modal"),n=document.querySelector(".main-modal__content"),a=document.querySelector(".main-modal__close"),o=document.querySelectorAll(".main-modal__content_link");function r(){t.style.transform="translateY(-200%)"}e.addEventListener("click",function(){t.classList.add("main-modal_active"),t.style="",setTimeout(function(){n.classList.add("main-modal__content_active"),a.classList.add("main-modal__close_active")},1e3)}),a.addEventListener("click",function(){r()}),o.forEach(function(e,t,n){e.addEventListener("click",function(){r()})})}(),e=document.querySelector(".git-butt"),t=document.querySelector(".git"),n=document.querySelector(".git__close-btn"),e.addEventListener("click",function(){t.classList.remove("git_active","animated","fadeOutUp"),t.classList.add("git_active","animated","fadeInRight")}),t.addEventListener("animationend",function(){n.addEventListener("click",function(){t.classList.remove("animated","fadeInRight"),t.classList.add("animated","fadeOutUp")})}),a=document.querySelector(".map-modal"),o=document.querySelector(".footer-contact__location"),r=a.querySelector(".map-modal__close"),o.addEventListener("click",function(){a.classList.remove("map-modal_active","animated","fadeOutUp"),a.classList.add("map-modal_active","animated","fadeInLeft")}),a.addEventListener("animationend",function(){r.addEventListener("click",function(){a.classList.remove("animated","fadeInLeft"),a.classList.add("animated","fadeOutUp")})}),i=document.querySelector(".form-modal"),c=document.querySelector(".footer-contact__btn"),s=document.querySelector(".postcard_close"),c.addEventListener("click",function(){i.classList.remove("form-modal_active","animated","fadeOutDown"),i.classList.add("form-modal_active","animated","fadeInRight")}),i.addEventListener("animationend",function(){s.addEventListener("click",function(){i.classList.remove("animated","fadeInRight"),i.classList.add("animated","fadeOutDown")})}),l=document.querySelector(".form-row__submit"),d=document.querySelector(".postcard"),u=document.querySelectorAll(".form-row__inp"),document.querySelectorAll(".form-row__lb"),m=document.querySelector(".form-row__reset"),l.addEventListener("click",function(e){u.forEach(function(e,t,n){""===e.value&&(d.classList.add("animated","shake"),e.classList.add("form-row__inp_wrong"),formBlock.addEventListener("animationend",function(){d.classList.remove("animated","shake")}))})}),m.addEventListener("click",function(){u.forEach(function(e,t,n){e.classList.contains("form-row__inp_wrong")&&e.classList.remove("form-row__inp_wrong")})}),f=document.querySelector(".workflow-info__p q"),h=document.querySelector(".skills"),_=document.querySelector(".skills__butt"),f.addEventListener("click",function(){h.classList.remove("skills_active","animated","fadeOutUp"),h.classList.add("skills_active","animated","fadeInRight")}),h.addEventListener("animationend",function(){_.addEventListener("click",function(){h.classList.remove("animated","fadeInRight"),h.classList.add("animated","fadeOutUp")})}),function(){var e=document.querySelector(".portfolio-btn_left"),t=document.querySelector(".portfolio-btn_right"),n=document.querySelector(".work__img"),a=document.querySelector(".work__info-title"),o=document.querySelector(".work-info__text_pages span"),r=document.querySelector(".work__info-cite"),i=document.querySelector(".work__info-title"),c=[n,a,o,r],s=["img/mouse.jpg","img/sedona.jpg","img/tesla.jpg","img/loco.jpg"],l=["Catch mice","Sedona","Tesla","Loco"],d=["https://webheroschool.github.io/fristyr-js-game/","https://fristyr.github.io/fristyr-sedona/","https://webheroschool.github.io/tesla-fristyr/","https://webheroschool.github.io/loco/"],u=["Try to catch the mouse, simple js game","Sedona - my first simple HTML CSS project","Loco - simple responsive landig page","Tesla - simple responsive landig page"],m=["01","02","03","04"],f=0;function h(){c.forEach(function(e,t,n){e.classList.add("animated","fadeIn","fast")})}function _(){c.forEach(function(e,t,n){e.addEventListener("animationend",function(){e.classList.remove("animated","fadeIn","fast")})})}t.addEventListener("click",function(){s.length<=++f&&(f=0),n.src=s[f],i.href=d[f],a.innerHTML=l[f],o.innerHTML=m[f],r.innerHTML=u[f],h(),_()},_()),e.addEventListener("click",function(){--f<0&&(f=s.length-1),n.src=s[f],i.href=d[f],a.innerHTML=l[f],o.innerHTML=m[f],r.innerHTML=u[f],h(),_()},_())}(),fetch("https://api.github.com/users/fristyr/repos").then(function(e){return e.json()}).then(function(e){var t=document.querySelector(".repos-wrapp"),n=e.map(function(e){var t=e.html_url;return'\n              <article class="repo"> \n                  <a href="'.concat(t,'" target="_blank" class="repo__name">').concat(e.name,'</a>\n                  <div class="repo__info">\n                      <span class="repo__technology">').concat(e.language,'</span> \n                      <span class="repo__technology repo__technology_stars">').concat(e.stargazers_count,'</span>\n                      <span class="repo__technology repo__technology_fork">').concat(e.forks,'</span> \n                      <span class="repo__update">Updated on ').concat(new Date(e.updated_at).toLocaleDateString("en-EN",{day:"numeric",month:"long",year:"numeric"}).replace(" y.",""),"</span>\n                  </div>\n              </article>\n              ")});t.insertAdjacentHTML("afterbegin",n.join(" "))}),function(){var e=document.querySelectorAll('a[href*="#"]'),t=!0,n=!1,a=void 0;try{for(var o,r=function(){var n=o.value;n.addEventListener("click",function(e){e.preventDefault();var t=n.getAttribute("href");document.querySelector(""+t).scrollIntoView({behavior:"smooth",block:"start"})})},i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)r()}catch(e){n=!0,a=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}}(),L()}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImdpdE1vZGFsT3BlbkJ1dHQiLCJnaXRNb2RhbCIsImdpdE1vZGFsQ2xvc2VCdXR0IiwibW9kYWxCbG9jayIsIm9wZW5Nb2RhbCIsImNsb3NlTW9kYWwiLCJmb3JtQmxvY2siLCJvcGVuRm9ybSIsImNsb3NlRm9ybSIsImZvcm1TdWJtaXRCdG4iLCJwb3N0Y2FyZEZvcm0iLCJmb3JtSXB0IiwicmVzZXRGb3JtQnV0dCIsInNraWxsc01vZGFsT3BlbkJ1dHQiLCJza2lsbHNNb2RhbCIsInNraWxsc01vZGFsQ2xvc2VCdXR0IiwicGhyYXNlcyIsImZ4IiwiVGV4dFNjcmFtYmxlIiwiZWwiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiY2hhcnMiLCJ1cGRhdGUiLCJiaW5kIiwiX2NyZWF0ZUNsYXNzIiwia2V5IiwidmFsdWUiLCJuZXdUZXh0IiwiX3RoaXMiLCJvbGRUZXh0IiwiaW5uZXJUZXh0IiwibGVuZ3RoIiwiTWF0aCIsIm1heCIsInByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInF1ZXVlIiwiaSIsImZyb20iLCJ0byIsInN0YXJ0IiwiZmxvb3IiLCJyYW5kb20iLCJlbmQiLCJwdXNoIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJmcmFtZVJlcXVlc3QiLCJmcmFtZSIsIm91dHB1dCIsImNvbXBsZXRlIiwibiIsIl90aGlzJHF1ZXVlJGkiLCJjaGFyIiwicmFuZG9tQ2hhciIsImNvbmNhdCIsImlubmVySFRNTCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvdW50ZXIiLCJuZXh0U2NydW1iRnVuYyIsInNldFRleHQiLCJ0aGVuIiwic2V0VGltZW91dCIsImJvZHkiLCJvbmxvYWQiLCJwcmVsb2FkZXIiLCJnZXRFbGVtZW50QnlJZCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwibWFpbk1vZGFsQnRuIiwibWFpbk1vZGFsIiwibWFpbm1Nb2RhQ29udGVudCIsIm1haW5Nb2RhbENsb3NlQnRuIiwibWFpbk1vZGFJbnNpZGVMaW5rcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZW1vdmVNYWluTW9kYWwiLCJzdHlsZSIsInRyYW5zZm9ybSIsImFkZEV2ZW50TGlzdGVuZXIiLCJmb3JFYWNoIiwiaXRlbSIsImFyciIsIm1haW5Nb2RhbEZ1bmMiLCJyZW1vdmUiLCJldnQiLCJzbGlkZXJCdG5MZWZ0Iiwic2xpZGVyQnRuUmlnaHQiLCJzbGlkZXIiLCJzbGlkZXJOYW1lIiwic2xpZGVySW5kZXhIdG1sIiwic2xpZGVyQ2l0ZUh0bWwiLCJzbGlkZXJMaW5rSHRtbCIsInNsaWRlckFuaW1hdGlvblZhcnMiLCJzbGlkZXJJbWFnZXMiLCJzbGlkZXJOYW1lcyIsInNsaWRlckxpbmtzIiwic2xpZGVyQ2l0ZSIsInNsaWRlckluZGV4IiwibnVtIiwiYWRkU2xpZGVyQW5pbSIsInJlbW92ZVNsaWRlckFuaW0iLCJzcmMiLCJocmVmIiwicG9ydGZvbGlvU2xpZGVyRnVuYyIsImZldGNoIiwicmVzcG9uc2UiLCJqc29uIiwiZGF0YSIsInJlcG9XcmFwcCIsImh0bWxGb3JSZXBvIiwibWFwIiwicmVwb0xpbmsiLCJodG1sX3VybCIsIm5hbWUiLCJsYW5ndWFnZSIsInN0YXJnYXplcnNfY291bnQiLCJmb3JrcyIsIkRhdGUiLCJ1cGRhdGVkX2F0IiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiZGF5IiwibW9udGgiLCJ5ZWFyIiwicmVwbGFjZSIsImluc2VydEFkamFjZW50SFRNTCIsImpvaW4iLCJhbmNob3JzIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJ1bmRlZmluZWQiLCJfc3RlcCIsIl9sb29wIiwiYW5jaG9yIiwiZSIsInByZXZlbnREZWZhdWx0IiwiYmxvY2tJRCIsImdldEF0dHJpYnV0ZSIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJibG9jayIsIl9pdGVyYXRvciIsIlN5bWJvbCIs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QSxHQUFBZ0YsR0FBQUUsZUFBQSxDQUNBQyxTQUFBLFNBQ0FDLE1BQUEsYUFSQUMsRUFBQWYsRUFBQWdCLE9BQUFDLGNBQUFoQixHQUFBSSxFQUFBVSxFQUFBRyxRQUFBQyxNQUFBbEIsR0FBQSxFQUFBSyxJQUhBLE1BQUFjLEdBQUFsQixHQUFBLEVBQUFDLEVBQUFpQixFQUFBLFFBQUEsSUFBQW5CLEdBQUEsTUFBQWMsRUFBQU0sUUFBQU4sRUFBQU0sU0FBQSxRQUFBLEdBQUFuQixFQUFBLE1BQUFDLElBcUhBbUIsR0FDQTFGLElBcmFBIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGZ1bmN0aW9uIG1haW5QcmVsb2FkZXJGdW5jKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZS1yZWxvYWRlcicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFwcmVsb2FkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdkb25lJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVsb2FkZXIuY2xhc3NMaXN0LmFkZCgnZG9uZScpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtYWluTW9kYWxGdW5jKCkge1xyXG4gICAgICAgIGNvbnN0IG1haW5Nb2RhbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXItbWVudScpXHJcbiAgICAgICAgY29uc3QgbWFpbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tbW9kYWwnKVxyXG4gICAgICAgIGNvbnN0IG1haW5tTW9kYUNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1tb2RhbF9fY29udGVudCcpXHJcbiAgICAgICAgY29uc3QgbWFpbk1vZGFsQ2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1tb2RhbF9fY2xvc2UnKVxyXG4gICAgICAgIGNvbnN0IG1haW5Nb2RhSW5zaWRlTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWFpbi1tb2RhbF9fY29udGVudF9saW5rJylcclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZE1haW5Nb2RhbENsYXNzKCkge1xyXG4gICAgICAgICAgICBtYWluTW9kYWwuY2xhc3NMaXN0LmFkZCgnbWFpbi1tb2RhbF9hY3RpdmUnKVxyXG4gICAgICAgICAgICBtYWluTW9kYWwuc3R5bGUgPSAnJ1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIHNob3dVcEFuaW1hdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIG1haW5tTW9kYUNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnbWFpbi1tb2RhbF9fY29udGVudF9hY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgbWFpbk1vZGFsQ2xvc2VCdG4uY2xhc3NMaXN0LmFkZCgnbWFpbi1tb2RhbF9fY2xvc2VfYWN0aXZlJylcclxuICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmVNYWluTW9kYWwoKSB7XHJcbiAgICAgICAgICAgIG1haW5Nb2RhbC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgtMjAwJSknXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWFpbk1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBhZGRNYWluTW9kYWxDbGFzcygpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgbWFpbk1vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlbW92ZU1haW5Nb2RhbCgpXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgbWFpbk1vZGFJbnNpZGVMaW5rcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGksIGFycikge1xyXG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlTWFpbk1vZGFsKClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdpdE1vZGFsRnVuYygpIHtcclxuICAgICAgICBjb25zdCBnaXRNb2RhbE9wZW5CdXR0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdpdC1idXR0JylcclxuICAgICAgICBjb25zdCBnaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5naXQnKVxyXG4gICAgICAgIGNvbnN0IGdpdE1vZGFsQ2xvc2VCdXR0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdpdF9fY2xvc2UtYnRuJylcclxuXHJcbiAgICAgICAgZ2l0TW9kYWxPcGVuQnV0dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgZ2l0TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnZ2l0X2FjdGl2ZScsICdhbmltYXRlZCcsICdmYWRlT3V0VXAnKTtcclxuICAgICAgICAgICAgZ2l0TW9kYWwuY2xhc3NMaXN0LmFkZCgnZ2l0X2FjdGl2ZScsICdhbmltYXRlZCcsICdmYWRlSW5SaWdodCcpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRvQWZ0ZXJHaXRBbmltYXRpb24oKSB7XHJcbiAgICAgICAgICAgIGdpdE1vZGFsQ2xvc2VCdXR0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZ2l0TW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0ZWQnLCAnZmFkZUluUmlnaHQnKTtcclxuICAgICAgICAgICAgICAgIGdpdE1vZGFsLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJywgJ2ZhZGVPdXRVcCcpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2l0TW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGRvQWZ0ZXJHaXRBbmltYXRpb24oKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWFwTW9kYWxGdW5jKCkge1xyXG4gICAgICAgIGNvbnN0IG1vZGFsQmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFwLW1vZGFsJyk7XHJcbiAgICAgICAgY29uc3Qgb3Blbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvb3Rlci1jb250YWN0X19sb2NhdGlvbicpO1xyXG4gICAgICAgIGNvbnN0IGNsb3NlTW9kYWwgPSBtb2RhbEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5tYXAtbW9kYWxfX2Nsb3NlJyk7XHJcblxyXG4gICAgICAgIG9wZW5Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgbW9kYWxCbG9jay5jbGFzc0xpc3QucmVtb3ZlKCdtYXAtbW9kYWxfYWN0aXZlJywgJ2FuaW1hdGVkJywgJ2ZhZGVPdXRVcCcpO1xyXG4gICAgICAgICAgICBtb2RhbEJsb2NrLmNsYXNzTGlzdC5hZGQoJ21hcC1tb2RhbF9hY3RpdmUnLCAnYW5pbWF0ZWQnLCAnZmFkZUluTGVmdCcpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRvQWZ0ZXJNYXBBbmltYXRpb24oKSB7XHJcbiAgICAgICAgICAgIGNsb3NlTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBtb2RhbEJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGVkJywgJ2ZhZGVJbkxlZnQnKTtcclxuICAgICAgICAgICAgICAgIG1vZGFsQmxvY2suY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZWQnLCAnZmFkZU91dFVwJyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtb2RhbEJsb2NrLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBkb0FmdGVyTWFwQW5pbWF0aW9uKClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGZvcm1Nb2RhbEZ1bmMoKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybUJsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0tbW9kYWwnKTtcclxuICAgICAgICBjb25zdCBvcGVuRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXItY29udGFjdF9fYnRuJyk7XHJcbiAgICAgICAgY29uc3QgY2xvc2VGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvc3RjYXJkX2Nsb3NlJyk7XHJcblxyXG4gICAgICAgIG9wZW5Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBmb3JtQmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnZm9ybS1tb2RhbF9hY3RpdmUnLCAnYW5pbWF0ZWQnLCAnZmFkZU91dERvd24nKTtcclxuICAgICAgICAgICAgZm9ybUJsb2NrLmNsYXNzTGlzdC5hZGQoJ2Zvcm0tbW9kYWxfYWN0aXZlJywgJ2FuaW1hdGVkJywgJ2ZhZGVJblJpZ2h0Jyk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZG9BZnRlckZvcm1BTmltYXRpb24oKSB7XHJcbiAgICAgICAgICAgIGNsb3NlRm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGZvcm1CbG9jay5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlZCcsICdmYWRlSW5SaWdodCcpO1xyXG4gICAgICAgICAgICAgICAgZm9ybUJsb2NrLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJywgJ2ZhZGVPdXREb3duJyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3JtQmxvY2suYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGRvQWZ0ZXJGb3JtQU5pbWF0aW9uKClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGZvcm1WYWxpZGF0ZUZ1bmMoKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybVN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLXJvd19fc3VibWl0JylcclxuICAgICAgICBjb25zdCBwb3N0Y2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9zdGNhcmQnKVxyXG4gICAgICAgIGNvbnN0IGZvcm1JcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1yb3dfX2lucCcpXHJcbiAgICAgICAgY29uc3QgZm9ybUxiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tcm93X19sYicpXHJcbiAgICAgICAgY29uc3QgcmVzZXRGb3JtQnV0dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLXJvd19fcmVzZXQnKVxyXG5cclxuICAgICAgICBmb3JtU3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBmb3JtSXB0LmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaSwgYXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gJycpIHtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBvc3RjYXJkRm9ybS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlZCcsICdzaGFrZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnZm9ybS1yb3dfX2lucF93cm9uZycpXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybUJsb2NrLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGNhcmRGb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGVkJywgJ3NoYWtlJylcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHJlc2V0Rm9ybUJ1dHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGZvcm1JcHQuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpLCBhcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygnZm9ybS1yb3dfX2lucF93cm9uZycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdmb3JtLXJvd19faW5wX3dyb25nJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2tpbGxzTW9kYWxGdW5jKCkge1xyXG4gICAgICAgIGNvbnN0IHNraWxsc01vZGFsT3BlbkJ1dHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya2Zsb3ctaW5mb19fcCBxJylcclxuICAgICAgICBjb25zdCBza2lsbHNNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5za2lsbHMnKVxyXG4gICAgICAgIGNvbnN0IHNraWxsc01vZGFsQ2xvc2VCdXR0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNraWxsc19fYnV0dCcpXHJcblxyXG4gICAgICAgIHNraWxsc01vZGFsT3BlbkJ1dHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHNraWxsc01vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ3NraWxsc19hY3RpdmUnLCAnYW5pbWF0ZWQnLCAnZmFkZU91dFVwJyk7XHJcbiAgICAgICAgICAgIHNraWxsc01vZGFsLmNsYXNzTGlzdC5hZGQoJ3NraWxsc19hY3RpdmUnLCAnYW5pbWF0ZWQnLCAnZmFkZUluUmlnaHQnKTtcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkb0FmdGVyU2tpbGxzQW5pbWF0aW9uKCkge1xyXG4gICAgICAgICAgICBza2lsbHNNb2RhbENsb3NlQnV0dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHNraWxsc01vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGVkJywgJ2ZhZGVJblJpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICBza2lsbHNNb2RhbC5jbGFzc0xpc3QuYWRkKCdhbmltYXRlZCcsICdmYWRlT3V0VXAnKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNraWxsc01vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBkb0FmdGVyU2tpbGxzQW5pbWF0aW9uKClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHBvcnRmb2xpb1NsaWRlckZ1bmMoKSB7XHJcbiAgICAgICAgY29uc3Qgc2xpZGVyQnRuTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3J0Zm9saW8tYnRuX2xlZnQnKVxyXG4gICAgICAgIGNvbnN0IHNsaWRlckJ0blJpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcnRmb2xpby1idG5fcmlnaHQnKVxyXG4gICAgICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3JrX19pbWcnKVxyXG4gICAgICAgIGNvbnN0IHNsaWRlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud29ya19faW5mby10aXRsZScpXHJcbiAgICAgICAgY29uc3Qgc2xpZGVySW5kZXhIdG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmstaW5mb19fdGV4dF9wYWdlcyBzcGFuJylcclxuICAgICAgICBjb25zdCBzbGlkZXJDaXRlSHRtbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3JrX19pbmZvLWNpdGUnKVxyXG4gICAgICAgIGNvbnN0IHNsaWRlckxpbmtIdG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtfX2luZm8tdGl0bGUnKVxyXG5cclxuICAgICAgICBjb25zdCBzbGlkZXJBbmltYXRpb25WYXJzID0gW1xyXG4gICAgICAgICAgICBzbGlkZXIsXHJcbiAgICAgICAgICAgIHNsaWRlck5hbWUsXHJcbiAgICAgICAgICAgIHNsaWRlckluZGV4SHRtbCxcclxuICAgICAgICAgICAgc2xpZGVyQ2l0ZUh0bWxcclxuICAgICAgICBdXHJcblxyXG4gICAgICAgIGNvbnN0IHNsaWRlckltYWdlcyA9IFtcclxuICAgICAgICAgICAgJ2ltZy9tb3VzZS5qcGcnLFxyXG4gICAgICAgICAgICAnaW1nL3NlZG9uYS5qcGcnLFxyXG4gICAgICAgICAgICAnaW1nL3Rlc2xhLmpwZycsXHJcbiAgICAgICAgICAgICdpbWcvbG9jby5qcGcnXHJcbiAgICAgICAgXVxyXG5cclxuICAgICAgICBjb25zdCBzbGlkZXJOYW1lcyA9IFtcclxuICAgICAgICAgICAgJ0NhdGNoIG1pY2UnLFxyXG4gICAgICAgICAgICAnU2Vkb25hJyxcclxuICAgICAgICAgICAgJ1Rlc2xhJyxcclxuICAgICAgICAgICAgJ0xvY28nXHJcbiAgICAgICAgXVxyXG5cclxuICAgICAgICBjb25zdCBzbGlkZXJMaW5rcyA9IFtcclxuICAgICAgICAgICAgJ2h0dHBzOi8vd2ViaGVyb3NjaG9vbC5naXRodWIuaW8vZnJpc3R5ci1qcy1nYW1lLycsXHJcbiAgICAgICAgICAgICdodHRwczovL2ZyaXN0eXIuZ2l0aHViLmlvL2ZyaXN0eXItc2Vkb25hLycsXHJcbiAgICAgICAgICAgICdodHRwczovL3dlYmhlcm9zY2hvb2wuZ2l0aHViLmlvL3Rlc2xhLWZyaXN0eXIvJyxcclxuICAgICAgICAgICAgJ2h0dHBzOi8vd2ViaGVyb3NjaG9vbC5naXRodWIuaW8vbG9jby8nXHJcbiAgICAgICAgXVxyXG5cclxuICAgICAgICBjb25zdCBzbGlkZXJDaXRlID0gW1xyXG4gICAgICAgICAgICAnVHJ5IHRvIGNhdGNoIHRoZSBtb3VzZSwgc2ltcGxlIGpzIGdhbWUnLFxyXG4gICAgICAgICAgICAnU2Vkb25hIC0gbXkgZmlyc3Qgc2ltcGxlIEhUTUwgQ1NTIHByb2plY3QnLFxyXG4gICAgICAgICAgICAnTG9jbyAtIHNpbXBsZSByZXNwb25zaXZlIGxhbmRpZyBwYWdlJyxcclxuICAgICAgICAgICAgJ1Rlc2xhIC0gc2ltcGxlIHJlc3BvbnNpdmUgbGFuZGlnIHBhZ2UnXHJcbiAgICAgICAgXVxyXG5cclxuICAgICAgICBjb25zdCBzbGlkZXJJbmRleCA9IFtcclxuICAgICAgICAgICAgJzAxJyxcclxuICAgICAgICAgICAgJzAyJyxcclxuICAgICAgICAgICAgJzAzJyxcclxuICAgICAgICAgICAgJzA0J1xyXG4gICAgICAgIF1cclxuXHJcblxyXG4gICAgICAgIGxldCBudW0gPSAwO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBuZXh0KCkge1xyXG4gICAgICAgICAgICBudW0rKztcclxuICAgICAgICAgICAgaWYgKG51bSA+PSBzbGlkZXJJbWFnZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBudW0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNsaWRlci5zcmMgPSBzbGlkZXJJbWFnZXNbbnVtXTtcclxuICAgICAgICAgICAgc2xpZGVyTGlua0h0bWwuaHJlZiA9IHNsaWRlckxpbmtzW251bV07XHJcbiAgICAgICAgICAgIHNsaWRlck5hbWUuaW5uZXJIVE1MID0gc2xpZGVyTmFtZXNbbnVtXTtcclxuICAgICAgICAgICAgc2xpZGVySW5kZXhIdG1sLmlubmVySFRNTCA9IHNsaWRlckluZGV4W251bV07XHJcbiAgICAgICAgICAgIHNsaWRlckNpdGVIdG1sLmlubmVySFRNTCA9IHNsaWRlckNpdGVbbnVtXTtcclxuICAgICAgICAgICAgYWRkU2xpZGVyQW5pbSgpXHJcbiAgICAgICAgICAgIHJlbW92ZVNsaWRlckFuaW0oKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcHJldigpIHtcclxuICAgICAgICAgICAgbnVtLS07XHJcbiAgICAgICAgICAgIGlmIChudW0gPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBudW0gPSBzbGlkZXJJbWFnZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzbGlkZXIuc3JjID0gc2xpZGVySW1hZ2VzW251bV07XHJcbiAgICAgICAgICAgIHNsaWRlckxpbmtIdG1sLmhyZWYgPSBzbGlkZXJMaW5rc1tudW1dO1xyXG4gICAgICAgICAgICBzbGlkZXJOYW1lLmlubmVySFRNTCA9IHNsaWRlck5hbWVzW251bV07XHJcbiAgICAgICAgICAgIHNsaWRlckluZGV4SHRtbC5pbm5lckhUTUwgPSBzbGlkZXJJbmRleFtudW1dO1xyXG4gICAgICAgICAgICBzbGlkZXJDaXRlSHRtbC5pbm5lckhUTUwgPSBzbGlkZXJDaXRlW251bV07XHJcbiAgICAgICAgICAgIGFkZFNsaWRlckFuaW0oKVxyXG4gICAgICAgICAgICByZW1vdmVTbGlkZXJBbmltKClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZFNsaWRlckFuaW0oKSB7XHJcbiAgICAgICAgICAgIHNsaWRlckFuaW1hdGlvblZhcnMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpLCBhcnIpIHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZWQnLCAnZmFkZUluJywgJ2Zhc3QnKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmVTbGlkZXJBbmltKCkge1xyXG4gICAgICAgICAgICBzbGlkZXJBbmltYXRpb25WYXJzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaSwgYXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGVkJywgJ2ZhZGVJbicsICdmYXN0JylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2xpZGVyQnRuUmlnaHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBuZXh0LCByZW1vdmVTbGlkZXJBbmltKCkpO1xyXG4gICAgICAgIHNsaWRlckJ0bkxlZnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwcmV2LCByZW1vdmVTbGlkZXJBbmltKCkpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRHaXRSZXBvc0Z1bmMoKSB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vdXNlcnMvZnJpc3R5ci9yZXBvcydcclxuXHJcbiAgICAgICAgZmV0Y2godXJsKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXBvV3JhcHAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVwb3Mtd3JhcHAnKVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGh0bWxGb3JSZXBvID0gZGF0YS5tYXAoZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcG9MaW5rID0gaXRlbS5odG1sX3VybFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgXHJcbiAgICAgICAgICAgICAgPGFydGljbGUgY2xhc3M9XCJyZXBvXCI+IFxyXG4gICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHtyZXBvTGlua31cIiB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzcz1cInJlcG9fX25hbWVcIj4ke2l0ZW0ubmFtZX08L2E+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZXBvX19pbmZvXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlcG9fX3RlY2hub2xvZ3lcIj4ke2l0ZW0ubGFuZ3VhZ2V9PC9zcGFuPiBcclxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicmVwb19fdGVjaG5vbG9neSByZXBvX190ZWNobm9sb2d5X3N0YXJzXCI+JHtpdGVtLnN0YXJnYXplcnNfY291bnR9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXBvX190ZWNobm9sb2d5IHJlcG9fX3RlY2hub2xvZ3lfZm9ya1wiPiR7aXRlbS5mb3Jrc308L3NwYW4+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJyZXBvX191cGRhdGVcIj5VcGRhdGVkIG9uICR7bmV3IERhdGUoaXRlbS51cGRhdGVkX2F0KS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLUVOJyx7ZGF5OiAnbnVtZXJpYycsbW9udGg6J2xvbmcnLHllYXI6ICdudW1lcmljJ30pLnJlcGxhY2UoXCIgeS5cIiwgXCJcIil9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2FydGljbGU+XHJcbiAgICAgICAgICAgICAgYFxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICByZXBvV3JhcHAuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgaHRtbEZvclJlcG8uam9pbignICcpKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBhbmNob3JMaW5rc0Z1bmMoKSB7XHJcbiAgICAgICAgY29uc3QgYW5jaG9ycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2FbaHJlZio9XCIjXCJdJylcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYW5jaG9yIG9mIGFuY2hvcnMpIHtcclxuICAgICAgICAgICAgYW5jaG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYmxvY2tJRCA9IGFuY2hvci5nZXRBdHRyaWJ1dGUoJ2hyZWYnKVxyXG5cclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJycgKyBibG9ja0lEKS5zY3JvbGxJbnRvVmlldyh7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrOiAnc3RhcnQnXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGNsYXNzIFRleHRTY3JhbWJsZSB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoZWwpIHtcclxuICAgICAgICAgICAgdGhpcy5lbCA9IGVsXHJcbiAgICAgICAgICAgIHRoaXMuY2hhcnMgPSAnITw+LV9cXFxcL1tde309KypePyMnXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRUZXh0KG5ld1RleHQpIHtcclxuICAgICAgICAgICAgY29uc3Qgb2xkVGV4dCA9IHRoaXMuZWwuaW5uZXJUZXh0XHJcbiAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KG9sZFRleHQubGVuZ3RoLCBuZXdUZXh0Lmxlbmd0aClcclxuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB0aGlzLnJlc29sdmUgPSByZXNvbHZlKVxyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlID0gW11cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZnJvbSA9IG9sZFRleHRbaV0gfHwgJydcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvID0gbmV3VGV4dFtpXSB8fCAnJ1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApXHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBzdGFydCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMClcclxuICAgICAgICAgICAgICAgIHRoaXMucXVldWUucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbSxcclxuICAgICAgICAgICAgICAgICAgICB0byxcclxuICAgICAgICAgICAgICAgICAgICBzdGFydCxcclxuICAgICAgICAgICAgICAgICAgICBlbmRcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5mcmFtZVJlcXVlc3QpXHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSAwXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKClcclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgdXBkYXRlKCkge1xyXG4gICAgICAgICAgICBsZXQgb3V0cHV0ID0gJydcclxuICAgICAgICAgICAgbGV0IGNvbXBsZXRlID0gMFxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbiA9IHRoaXMucXVldWUubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb20sXHJcbiAgICAgICAgICAgICAgICAgICAgdG8sXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJcclxuICAgICAgICAgICAgICAgIH0gPSB0aGlzLnF1ZXVlW2ldXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mcmFtZSA+PSBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZSsrXHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9IHRvXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZnJhbWUgPj0gc3RhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYXIgfHwgTWF0aC5yYW5kb20oKSA8IDAuMDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhciA9IHRoaXMucmFuZG9tQ2hhcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWVbaV0uY2hhciA9IGNoYXJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9IGA8c3BhbiBjbGFzcz1cImludHJvX19zdWJ0aXRsZV9jaGFyXCI+JHtjaGFyfTwvc3Bhbj5gXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSBmcm9tXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSBvdXRwdXRcclxuICAgICAgICAgICAgaWYgKGNvbXBsZXRlID09PSB0aGlzLnF1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKClcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVSZXF1ZXN0ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZSsrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmFuZG9tQ2hhcigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5jaGFycy5sZW5ndGgpXVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGNvbnN0IHBocmFzZXMgPSBbXHJcbiAgICAgICAgJ2Egd2ViIGRldmVsb3BlcicsXHJcbiAgICAgICAgJ2EgZnJvbnQtZW5kIGRldmVsb3BlcicsXHJcbiAgICAgICAgJ2EgSmF2YVNjcmlwdCBkZXZlbG9wZXInXHJcblxyXG4gICAgXVxyXG5cclxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmludHJvX19zdWJ0aXRsZScpXHJcbiAgICBjb25zdCBmeCA9IG5ldyBUZXh0U2NyYW1ibGUoZWwpXHJcblxyXG4gICAgbGV0IGNvdW50ZXIgPSAwXHJcbiAgICBjb25zdCBuZXh0U2NydW1iRnVuYyA9ICgpID0+IHtcclxuICAgICAgICBmeC5zZXRUZXh0KHBocmFzZXNbY291bnRlcl0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KG5leHRTY3J1bWJGdW5jLCAxODAwKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgY291bnRlciA9IChjb3VudGVyICsgMSkgJSBwaHJhc2VzLmxlbmd0aFxyXG4gICAgfVxyXG5cclxuICAgIG5leHRTY3J1bWJGdW5jKClcclxuXHJcblxyXG5cclxuICAgIG1haW5QcmVsb2FkZXJGdW5jKClcclxuICAgIG1haW5Nb2RhbEZ1bmMoKVxyXG4gICAgZ2l0TW9kYWxGdW5jKClcclxuICAgIG1hcE1vZGFsRnVuYygpXHJcbiAgICBmb3JtTW9kYWxGdW5jKClcclxuICAgIGZvcm1WYWxpZGF0ZUZ1bmMoKVxyXG4gICAgc2tpbGxzTW9kYWxGdW5jKClcclxuICAgIHBvcnRmb2xpb1NsaWRlckZ1bmMoKVxyXG4gICAgZ2V0R2l0UmVwb3NGdW5jKClcclxuICAgIGFuY2hvckxpbmtzRnVuYygpXHJcbiAgICBuZXh0U2NydW1iRnVuYygpXHJcbn0pKCk7Il19
